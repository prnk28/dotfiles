
# ============================================
# Core Commands
# ============================================
# Editor
alias e="nvim"
alias vi="nvim"
alias vim="nvim"
alias e.usr="cd /usr/local/bin && sudo nvim"
alias vtd="open http://prads-macbook-pro-2.moray-bleak.ts.net:4020"
alias gdi="ghid"

# Shell & Terminal
alias x="clear"
alias update="exec zsh && tmux source {{ .chezmoi.homeDir }}/.tmux.conf && chezmoi apply && clear"
alias change="cd $ENV_DIR && nvim"

function q() {
  if [[ -n "$TMUX" ]]; then
    # Check if current tmux window is a popup
    if tmux display-message -p '#{window_popup_flag}' | grep -q 1; then
      tmux detach-client
    else
      exit
    fi
  else
    exit
  fi
}

function c() {
  if [[ -z $1 ]]; then
    clear
  else
    z "$1"
  fi
}

# ============================================
# Directory Navigation
# ============================================
# Enhanced cd (using zoxide)
alias ..="cd .."

# Quick jumps
alias cd.="chezmoi cd"
alias cdd="cd $GHQ_ROOT"
alias cdc="cd $XDG_CONFIG_HOME"
{{ if eq .chezmoi.os "darwin" -}}
alias cdh="cd /Volumes/Home"
{{ end -}}

# ============================================
# File Management
# ============================================
# Better ls with eza
alias ls="eza -F -1 --icons=always -T -L=1 -l --group-directories-first --no-user --no-filesize --no-permissions --git --no-time --octal-permissions"
alias lsd="eza -F -1 --icons=always -G -L=1 --no-user --no-filesize --no-permissions --git --no-time --octal-permissions"
alias gls="watch -t eza -F -1 --icons=always -T -L=1 -l --group-directories-first --no-user --no-filesize --no-permissions --git --no-time --octal-permissions"

# Tree view (filtered)
alias gt='tree -a --prune -I "api|chains|interchaintest|.devcontainer|.github|.aider.*|.devbox|.git|*_test.go|*_templ.go|*.md|node_modules|*.pb.gw.go|.DS_Store|*.pb.go|build|tmp|.wrangler|*.lock|*.pkl.go|*.lockb"'

# ============================================
# Git & Version Control
# ============================================
alias gg="lazygit"
alias gpu="git push --set-upstream origin HEAD"
alias gsb="git switch -"
alias gdf="git diff"
alias gdc='gum confirm "Reset local changes" && git reset --hard HEAD'

# Git versioning with commitizen
alias gitv="cz version -p"
alias gtb='cz bump && git push origin $(cz version -p)'

# GitHub tools
alias ghl="ghq list"
alias ghrm="ghq rm"
alias gghh="ghq get -"
alias ghd="gh dash"
alias ghca='for id in $(gh run list --limit 5000 --jq ".[] | select(.status == \"queued\") | .databaseId" --json databaseId,status); do gh run cancel $id; done'

# ============================================
# Development Tools
# ============================================
# Package managers & runtimes
alias b="bun"
alias python="python3"
alias pip="pip3"

# Task management
alias t="dstask"
alias ti="dstask-import"

# Docker
alias dd="lazydocker"
alias dkrmi="docker_rm_image"
alias dkc="docker_storm_container"

# Docker Compose
alias dcu="docker compose up"
alias dcps="docker compose ps"
alias dcl="docker compose logs"
alias dcd="docker compose down"
alias dcn="docker-nuke"

# ============================================
# Tmux & Sessions
# ============================================
alias tt="tmux"
alias tx="tmuxinator"
alias txr="tmux source {{ .chezmoi.homeDir }}/.tmux.conf"
alias txkill="tmux kill-server && tmux || tmux"

# ============================================
# Applications & Utilities
# ============================================
# File management
alias y="yazi"

# Networking
alias crl="curlie"

# Reading & Entertainment
alias hnews="hackernews_tui"
alias gr="goread"
alias pp="plexsearch"

# AI & Chat
alias ai="elia -m claude-3-5-sonnet-20240620"

# Misc tools
alias dl="daylight"
alias obsdn="obsidian-cli"
{{ if eq .chezmoi.os "darwin" -}}
alias chrome="/Applications/Google Chrome Dev.app/Contents/MacOS/Google Chrome Dev"
{{ end -}}

# ============================================
# Quick Commands
# ============================================
alias /a="aider"
alias /c="claude"
alias /cr="claude --continue"
alias /g="gemini"
alias /m="mods"
alias /o="opencode"
alias /v="npx vibe-kanban"

alias @c="ssh -C code"

# npm/pnpm aliases
alias p="pnpm"
alias nrb="npm run build"
alias nrs="npm run start"
alias nrd="npm run dev"
alias nrt="npm run test"

# Chezmoi
alias cm="chezmoi"
alias cmc="chezmoi cd"
alias cma="chezmoi add"
alias cme="chezmoi edit"
alias cm.="chezmoi apply"
alias !!="chezmoi apply && exec zsh && tmux source {{ .chezmoi.homeDir }}/.tmux.conf && clear"

# bmad
alias bmad-install="npx bmad-method install"

# ============================================
# Taskfile shortcuts
# ============================================
alias task-gh-dash="task -t ~/.local/taskfiles/Taskfile.gh-dash.yml"
alias task-lazygit="task -t ~/.local/taskfiles/Taskfile.lazygit.yml"
alias task-tmux="task -t ~/.local/taskfiles/Taskfile.tmux.yml"

# ============================================
# Devbox shortcuts
# ============================================
alias dx="devbox"
alias dxa="devbox add"
alias dxr="devbox run $(fd "devbox.json" -x jq -r '.shell.scripts | keys[]' {} | fzf --header Select Devbox Script:)"
alias dxrm="devbox rm"
alias dxg="devbox global"
alias dxga="devbox global add"
alias dxgrm="devbox global rm"
alias dxs="devbox services"
alias dxsu="devbox services up"
alias dxsd="devbox services down"
