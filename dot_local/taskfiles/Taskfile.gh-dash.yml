# https://taskfile.dev
version: "3"
silent: true
tasks:
  default:
    cmds:
      - echo "new-issue - Create a new issue"
      - echo "start-issue - Start a new issue"
      - echo "open-pr - Open an existing issue"
  new-issue:
    desc: Create a new issue
    vars:
      REPO:
        sh: gh repo list sonr-io --json name --jq ".[].name" | gum filter --placeholder "Select a repo to create an issue in"
      CONTEXT:
        sh: gum write --placeholder "Enter a short context for the issue"
    cmds:
      - echo "{{.REPO}}:{{.CONTEXT}}" | mods -R issue-creator
  start-issue:
    desc: Start a new issue
    requires:
      vars: [NUMBER, PATH]
    dir: "{{.PATH}}"
    cmds:
      - echo "Creating branch to start issue {{.NUMBER}}..."
      - title=$(gh issue view {{.NUMBER}} | mods -R branch-namer); gh issue develop {{.NUMBER}} -n $title -c
  open-pr:
    desc: Open an existing issue
    requires:
      vars: [NUMBER, PATH]
    dir: "{{.PATH}}"
    cmds:
      - echo "Currently not implemented"
